# J // Промежуточный проект {#j .unnumbered}

```{=html}
<!--
REPLACE ALL hw1 TO hw<n> WITH MATCH CASE
-->
```
В этом проекте вам предстоит предобработать данные и построить несколько визуализаций.


## Важные моменты

* код должен воспроизводиться на любой операционной системе
* код должен хорошо читаться





## Вариант 1 {#j_1}

Для работы вам предлагаются данные, полученные в ходе адаптации опросника на измерение когнитивной нагрузки NASA-TLX, выполненной командой HSE UX LAB[^ref_nasa_tlx].

[^ref_nasa_tlx]: Когда будет опубликована статья, мы повесим сюда ссылку.

**Архив с данными [тут](https://drive.google.com/uc?export=download&id=1dr2RvXTUdyhP_1YGoiQ-VR4FaU5tZ1x7).**

Это было большое исследование, поэтому нас будет интересовать только часть данных. В ходе адаптации, работоспособность опросника проверялась на нескольких задачах, одной из которых было **мысленное вращение (mental rotation)**. Этими данными мы и займемся.

<details>
<summary>Что такое мысленно вращение (mental rotation)?</summary>

Человеку предъявляются две фигуры. Задача испытуемого заключается в том, чтобы определить, являются ли фигуры одинаковыми с точностью до поворота или две фигуры различны. Иллюстрация представлена ниже.

<center>
<figure>
<img src="pics/mr-shepard.png">
<figcaption>Иллюстрация из @Shepard1971. A и B --- одинаковые фигуры, C --- разные фигуры.</figcaption>
</figure>
</center>

Подробно можно почитать в @Shepard1971.

</details>

**Из дизайна исследования для предобработки данных важно знать, что**

* задача мысленного вращения была реализована в трех уровнях сложности --- легком (`easy`), среднем (`medium`) и сложном (`hard`)
* в каждом из уровней сложности было 16 проб
* ответ давался нажатием на клавишу со стрелкой --- вправо (`right`), если фигуры одинаковые, и влево (`left`), если фигуры различны

**Из организации файла сырых данных для предобработки данных важно знать, что**

* в каждом файле лежат данные одного респондента
* в каждой строке находятся данные одной пробы
* все файлы имеют одинаковую структуру

**Интересующие нас переменные датасета:**

* для всех условий:
    * `correctAns` --- верный ответ (`left` / `right`)
    * `base_pic` --- исходная картинка (название файла)
    * `rotated_pic` --- повернутая картинка (название файла)
* для условия `easy`:
    * `resp_MR_easy.keys` --- ответ респондента в пробе (`left` / `right`)
    * `resp_MR_easy.corr` --- является ли ответ респондента корректным (`0` / `1`)
    * `resp_MR_easy.rt` --- время реакции (от начала предъявления стимула до момента нажатия на клавишу, с)
* для условия `medium`:
    * `resp_MR_medium.keys` --- ответ респондента в пробе (`left` / `right`)
    * `resp_MR_medium.corr` --- является ли ответ респонтента корректным (`0` / `1`)
    * `resp_MR_medium.rt` --- является ли ответ респондента корректным (`0` / `1`)
* в условии `hard`:
    * `resp_MR_hard.keys` --- ответ респондента в пробе (`left` / `right`)
    * `resp_MR_hard.corr` --- является ли ответ респонтента корректным (`0` / `1`)
    * `resp_MR_hard.rt`--- время реакции (от начала предъявления стимула до момента нажатия на клавишу, с)



### Задание

1. Загрузите данные. Изучите их структуру, особенности записи.
1. Приведите данные к виду tidy data, используя пакет `tidyverse`. Предобработанные данные не должны содержать пропущенных значений. Финальный датасет должен содержать следующие колонки:
    * `id` --- идентификатор респондента (число или строка)
    * `level` --- уровень сложности задачи (строка, `easy` / `medium` / `hard`)
    * `trial` --- номер пробы в данном уровне сложности задачи (число)
    * `correct_ans` --- корректный ответ (строка)
    * `base_pic` --- исходная картинка (строка, название файла)
    * `rotated_pic` --- повернутая картинка (строка, название файла)
    * `key`--- ответ респондента в пробе (строка)
    * `is_correct`--- является ли ответ респондента корректным (число, `0` / `1`, из «сырых» данных)
    * `rt` --- время реакции (число)
1. Колонка `is_correct` создавалась встроенным в эксперимент скриптом. Проверьте, правильно ли он отработал.
1. Удалите из данных выбросы по времени реакции. Выбросами считайте наблюдения, которые отклоняются от среднего значения более чем на 2.5 стандартных отклонения.
1. Выгрузите предобработанные данные в формате CSV (кодировка UTF-8).
1. Постройте график, отображающий распределение времени реакции в трех условиях сложности задачи мысленного вращения. Все подписи, присутствующие на графике, должны быть выполнены на русском языке. График должен быть оформлен так, чтобы его можно было напечатать на черно-белом принтере.
1. Экспортируйте визуализацию в формате JPEG. Разрешение должно быть достаточным для печати.
1. Аггрегируйте данные: рассчитайте среднее время реакции и точность (accuracy) для каждого респондента в каждом уровне сложности задачи. Точность вычисляйте как долю корректных ответов респондента в данном уровне сложности.
1. Выгрузите аггрегированные данные в формате CSV (кодировка UTF-8).
1. Постройте график, отображающий зависимость точности (accuracy) от уровня сложности сложности задачи. Все подписи, присутствующие на графике, должны быть выполнены на английском языке. *Технических* ограничений на цветовую палитру нет.
1. Экспортируйте визуализацию в формате JPEG. Разрешение должно быть достаточным для печати. 





## Вариант 2 {#j_2}

Для работы вам предлагаются данные World Happiness Report 2019[^whr2019].

[^whr2019]: @whr2019

**Архив с данными [тут](https://drive.google.com/uc?export=download&id=1kb30E6iFKnejP-UQS4yGpn2Yo1K6y6Eq).**

Исходный датасет (`countries.csv`) содержит информацию о 152 странах мира. Данные включают в себя следующие переменные:

* `Overall rank` --- обобщенный ранг страны по всем показателям
* `Country or region` --- название страны (или территории)
* `Score` --- показатель уровня счастью в стране
* `GDP per capita` --- ВВП (внутренний валовой продукт, gross domestic product) на душу населения

и другие показатели (`Social support`, `Healthy life expectancy`, `Freedom to make life choices`, `Generosity`, `Perceptions of corruption`), фиксировавшиеся в данном исследовании.

Дополнительно представлен датасет `regions.csv`.



### Задание

1. Загрузите данные. Изучите их структуру, особенности записи.
1. Приведите данные к виду tidy data, используя пакет `tidyverse`. К предобработанным данным предъявлены следующие требования:
    * предобработанные данные не должны содержать пропущенных значений
    * финальный датасет должен содержать всю информацию исходного датасета, а также регион, в котором находится страна
    * названия столбцов датасета не должны содержать пробелов и заглавных букв
1. Выгрузите предобработанные данные в формате CSV (кодировка UTF-8).
1. Аггрегируйте данные по регионам. В аггрегированных данных по каждому из показателей отчета должны быть посчитаны среднее и стандартное отклонение.
1. Выгрузите аггрегированные данные в формате CSV (кодировка UTF-8).
1. Постройте график, отражающий уровень счастья в каждой стране для европейских стран. Страны на графике должны быть сгруппированы по регионам. График должен быть оформлен так, чтобы его можно было напечатать на черно-белом принтере.
1. Экспортируйте визуализацию в формате JPEG. Разрешение должно быть достаточным для печати.
1. Постройте график, отображающий связь между ВВП на душу населения и уровнем счастья для стран Африки.  Отобразите общий тренд. Страны должны быть сгруппированы по региону, однако при отображении тренда группировка учитываться не должна. Оптимизируйте визуализацию визуализацию так, чтобы пространство графика использовалось наиболее эффективно. *Технических* ограничений на цветовую палитру нет.
1. Экспортируйте визуализацию в формате JPEG. Разрешение должно быть достаточным для печати. 
